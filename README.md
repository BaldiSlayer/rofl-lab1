# rofl-lab1

## –ì–∞–π–¥ –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ LLM

### –ü—Ä–µ—Ä–µ–∫–≤–∏–∑–∏—Ç—ã
- —Å–∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω [Docker](https://www.docker.com)

1) –°–æ–±–∏—Ä–∞–µ–º `Docker` –æ–±—Ä–∞–∑:
    ```bash
    docker build -f ./dockerfiles/llm.dockerfile -t my-t .
    ```
2) –ó–∞–ø—É—Å–∫–∞–µ–º `Docker` –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
    ```bash
   # –ø–æ–¥—Å—Ç–∞–≤–∏—Ç—å API –∫–ª—é—á mistral
    docker run -p 8100:8100 -e MISTRAL_API_KEY=<API_–ö–õ–Æ–ß_MISTRAL> my-t
    ```
3) –ü–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ http://localhost:8100/docs. –≠—Ç–æ —Ä–∞–∑–¥–µ–ª —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π –∫ `API`, –æ—Ç—Å—é–¥–∞ –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å
–∑–∞–ø—Ä–æ—Å—ã –Ω–∞ —ç—Ç–æ —Å–∞–º–æ–µ `API`. –î–µ–ª–∞–µ—Ç—Å—è —ç—Ç–æ —Ç–∞–∫: –≤—ã–±–∏—Ä–∞–µ–º –ª—é–±—É—é —Ä—É—á–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä `/ping`), –∫–ª–∏–∫–∞–µ–º –ø–æ –Ω–µ–π, —Ç–∞–º
–±—É–¥–µ—Ç –∫–Ω–æ–ø–∫–∞ `Try it out`, –Ω–∞–∂–∏–º–∞–µ–º —Ç—É–¥–∞ - –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ–ª–µ –≤–≤–æ–¥–∞ –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –≤–≤–æ–¥–∏–º –∏ –∫–ª–∏–∫–∞–µ–º –Ω–∞ –∫–Ω–æ–ø–∫—É
`Execute`. –£ –∫–∞–∂–¥–æ–π —Ä—É—á–∫–∏ —Ç–∞–∫–∂–µ –µ—Å—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ, —á—Ç–æ –æ–Ω–∞ –¥–µ–ª–∞–µ—Ç. –î–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ—Ö–æ–∂–∏—Ö –¥–ª—è –≤–æ–ø—Ä–æ—Å–∞ –Ω–∞–¥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è
[/search_similar](http://0.0.0.0:8100/docs#/Questions/api_search_similar_search_similar_post), –∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞
–≤ `mistral` - [/get_chat_response](http://0.0.0.0:8100/docs#/Questions/api_get_chat_response_get_chat_response_post).

**–í–∞–∂–Ω–æ**: —Å–µ–π—á–∞—Å –≤ –ø—Ä–æ–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º `mistral-large-2411`. –≠—Ç–∞ –∂–µ –≤–µ—Ä—Å–∏—è
–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ —Ä—É—á–∫–µ `/get_chat_response`.

## –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ Telegram-–±–æ—Ç–∞

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞ –≤ Telegram
–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ [@BotFather](https://t.me/BotFather), —Å–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–µ–≥–æ –±–æ—Ç–∞ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ —Ç–æ–∫–µ–Ω.

### 2. –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ .env

–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ [GHTOKEN](https://github.com/settings/tokens?type=beta) (–Ω—É–∂–µ–Ω –≤–µ—á–Ω—ã–π —Ç–æ–∫–µ–Ω —Å read-write –¥–æ—Å—Ç—É–ø–æ–º –∫ Gist).
–ó–∞—Ç–µ–º, –≤ –∫–æ—Ä–Ω–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –µ–≥–æ —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

```
MISTRAL_API_KEY=<mistral token>
TGTOKEN=<tg bot token>
POSTGRES_PASSWORD=strong
POSTGRES_USER=admin
POSTGRES_DB=dbtfl
GHTOKEN=<ghtoken>
```

### 3. –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose
–î–ª—è —Å–±–æ—Ä–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
docker compose up --build
```

### 4. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –∫–æ–Ω—Ç–µ–π–Ωe—Ä—É PostgreSQL —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã:

```bash
docker exec -it postgres /bin/sh
```

–ò –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:
```bash
psql -h localhost -d dbtfl -U admin
```

### 5. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
–í—ã–ø–æ–ª–Ω–∏—Ç–µ [—Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã](https://github.com/BaldiSlayer/rofl-lab1/blob/main/postgresql/final_schema.sql) –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π (–ø–µ—Ä–≤—É—é —Å—Ç—Ä–æ—á–∫—É –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–µ –Ω–∞–¥–æ).

### 6. –ì–æ—Ç–æ–≤–æ! üéâ
